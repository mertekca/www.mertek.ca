<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #google-search-box {
            margin-top: 20px;
        }
    </style>

    <!-- Google Custom Search Engine Script -->
    <script async src="https://cse.google.com/cse.js?cx=11e846c3e49224d11"></script>
</head>
<body>
    <h1 id="page-title">Search Results</h1>

    <!-- Search Form -->
    <form action="/search" method="get" id="searchForm">
        <input type="text" name="q" id="searchQuery" placeholder="Search..." required>
        <button type="submit">Search</button>
    </form>

    <!-- Google Custom Search Results -->
    <div id="google-search-box" class="gcse-searchresults"></div>

    <script>
        // Pre-populate search box with the query parameter from the URL and update page title
        window.onload = function() {
            const query = new URLSearchParams(window.location.search).get('q');
            if (query) {
                document.getElementById('searchQuery').value = query;
                document.getElementById('page-title').innerText = "Search Results - " + decodeURIComponent(query);

                // Dynamically trigger the Google Custom Search Engine with the query
                // This is where the results will be shown inside the div below
                const gcseSearchBox = document.getElementById('google-search-box');
                gcseSearchBox.innerHTML = '';  // Clear previous results
                const script = document.createElement('script');
                script.src = `https://cse.google.com/cse.js?cx=11e846c3e49224d11&q=${encodeURIComponent(query)}`;
                gcseSearchBox.appendChild(script);
            }
        };
    </script>
</body>
</html>
