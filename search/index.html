<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results</title>
</head>
<body>
    <h1 id="page-title">Search Results</h1>

    <!-- Google Custom Search Engine Embed -->
    <script async src="https://cse.google.com/cse.js?cx=11e846c3e49224d11"></script>

    <!-- Search Form -->
    <form action="/search" method="get" id="searchForm">
        <input type="text" name="q" id="searchQuery" placeholder="Search..." required>
        <button type="submit">Search</button>
    </form>

    <!-- Custom Search Box -->
    <div class="gcse-searchresults"></div>

    <script>
        // Get query parameter from URL
        window.onload = function() {
            const query = new URLSearchParams(window.location.search).get('q');
            if (query) {
                document.getElementById('searchQuery').value = query;
                document.getElementById('page-title').innerText = "Search Results - " + decodeURIComponent(query);
                // Trigger the search automatically using the query
                var searchBox = document.querySelector('.gcse-searchresults');
                searchBox.innerHTML = `<gcse:searchresults query="${decodeURIComponent(query)}"></gcse:searchresults>`;
            }
        };
    </script>
</body>
</html>
